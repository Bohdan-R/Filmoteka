(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{QfWi:function(e,n,t){"use strict";t.r(n);t("iPZ8"),t("kypl"),t("pCzD"),t("RtS0"),t("4owi"),t("/YXa"),t("lmye"),t("WB5j"),t("D/wG"),t("fp7Y"),t("wCa+"),t("JBxO"),t("9UJh"),t("WoWj"),t("3dw1"),t("U00V"),t("yjly");var r,a,o={inputRef:document.querySelector(".search-form"),galleryRef:document.querySelector(".movie__list"),galContainerRef:document.querySelector(".js-container"),modalRef:document.querySelector(".card"),modalBoxRef:document.querySelector(".card-box"),btnCloseModalRef:document.querySelector(".card__btn-close"),modalBackdropRef:document.querySelector(".backdrop"),prevBtnRef:document.querySelector("#js-prev-btn"),nextBtnRef:document.querySelector("#js-next-btn"),paginBtnsRef:document.querySelectorAll(".pagination__page-btn"),paginBtnWrapper:document.querySelector(".pagination__page-numbers"),addToWatchedBtn:function(){return document.querySelector(".js-btn-watched")},addToQueueBtn:document.querySelector(".js-btn-queue")};t("FdtR");var l=(r={searchUrl:"https://api.themoviedb.org/3/search/movie?api_key=",trendingUrl:"https://api.themoviedb.org/3/trending/movie/week?api_key=",movieDetailsUrl:"https://api.themoviedb.org/3/movie/",movieGenreList:"https://api.themoviedb.org/3/genre/movie/list?api_key=",apiKey:"3550330ecc32a34c7342dbd44dd96d6e",movieID:0,searchQuerry:"",page:2,fetchSearchRequestGallery:function(){var e=""+this.searchUrl+this.apiKey+"&language=en-US&query="+this.searchQuerry+"&page="+this.page;return fetch(e).then((function(e){if(e.ok)return e.json();throw new Error(e.status)})).then((function(e){return e})).catch((function(e){return console.log(e)}))},fetchPopularMovieGallery:function(){var e=""+this.trendingUrl+this.apiKey+"&page="+this.page;return fetch(e).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e)}))},fetchMovieInfo:function(){var e=""+this.movieDetailsUrl+this.movieID+"?api_key="+this.apiKey+"&language=en-US";return fetch(e).then((function(e){return e.json()})).then((function(e){return e.results})).catch((function(e){return console.log(e)}))},fetchGenresList:function(){var e=""+this.movieGenreList+this.apiKey+"&language=en-US";return fetch(e).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e)}))},resetPage:function(){this.page=1},get query(){return this.searchQuerry},set query(e){this.searchQuerry=e}},"movieID",(a={}).movieID=a.movieID||{},a.movieID.get=function(){return this.movieID},"movieID",a.movieID=a.movieID||{},a.movieID.set=function(e){this.movieID=e},function(e,n){for(var t in n){(o=n[t]).configurable=o.enumerable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,t,o)}if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(n),a=0;a<r.length;a++){var o,l=r[a];(o=n[l]).configurable=o.enumerable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,l,o)}}(r,a),r),i=t("RsKt"),s=t.n(i),c=t("s9S4"),u=t.n(c);function d(){o.modalBackdropRef.classList.toggle("is-hidden"),o.modalBoxRef.innerHTML=""}o.btnCloseModalRef.addEventListener("click",d),o.modalBackdropRef.addEventListener("click",(function(e){e.target===e.currentTarget&&d()})),window.addEventListener("keydown",(function(e){"Escape"!==e.code||o.modalBackdropRef.classList.contains("is-hidden")||(d(),console.log("adasd"))}));var p=[],m=[];function f(e){return JSON.stringify(e)}function h(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return g(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function g(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}o.modalBoxRef.addEventListener("click",(function(e){return e.target.classList.contains("js-btn-watched")&&(p.push({name:"Охота наsdasdа",author:"ddsadsa",genre:"детектив",pageCount:724,publisher:"ООО Астрель"}),localStorage.setItem("moviesWatched",f(p))),p})),o.modalBoxRef.addEventListener("click",(function(e){return e.target.classList.contains("js-btn-queue")&&(m.push({name:"Охота наsdasdа",author:"ddsadsa",genre:"детектив",pageCount:724,publisher:"ООО Астрель"}),localStorage.setItem("viewQueue",f(m))),m}));var _,v=t("9va6"),y=o.inputRef,b=o.galleryRef,w=document.querySelector("#js-backdrop"),R={currentPage:1,totalPages:null,totalResults:null,error:!1},j=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],S={};function L(){R.error=!1,o.galleryRef.classList.remove("movie__list--error"),l.fetchPopularMovieGallery().then((function(e){return R.currentPage=e.page,R.totalPages=e.total_pages,R.totalResults=e.total_results,e})).then((function(e){var n=e.results;console.log(l.page),P(k(n,j))}))}function k(e,n){var t=e.map((function(e){if(null===e.poster_path)e.poster_path="https://i.ibb.co/hWJT4yj/noImage.jpg";else{var t="https://image.tmdb.org/t/p/w500/"+e.poster_path;e.poster_path=t}var r=e.release_date.slice(0,4),a=[];return e.genre_ids.forEach((function(e){for(var t,r=h(n);!(t=r()).done;){var o=t.value;o.id===e&&a.push(o.name)}})),Object.assign({},e,{genre_ids:a,release_date:r})}));return _=t,console.log(_),t}function P(e){var n=s()(e);b.insertAdjacentHTML("beforeend",n)}function q(){b.innerHTML="",l.fetchSearchRequestGallery().then((function(e){return R.currentPage=e.page,R.totalPages=e.total_pages,R.totalResults=e.total_results,e})).then((function(e){var n=e.results;0===n.length?M(o.galleryRef):P(k(n,j))})).catch((function(e){return console.log(e)}))}function M(e){R.error=!0,o.galleryRef.classList.add("movie__list--error");e.insertAdjacentHTML("afterbegin",'<div class="error">\n  <div class="error-img"><img src="https://i.ibb.co/4WvT00q/caterror.jpg" alt="" width="300"></div>\n\n  <p class="gallery__failure"> Unfortunately, no matches found. <span>Try again!</span> </p>\n</div>')}console.log(o.paginBtnsRef),o.paginBtnWrapper.addEventListener("click",(function(e){if("BUTTON"===e.target.nodeName){var n=e.target.textContent;l.page=Number(n),console.log(n),l.searchQuerry?q():(b.innerHTML="",L())}})),L(),y.addEventListener("input",v.debounce((function(e){if(l.resetPage(),R.error=!1,o.galleryRef.classList.remove("movie__list--error"),l.searchQuerry="",l.searchQuerry=y.value,console.log(l.page),!e.target.value)return;b.innerHTML="",l.fetchSearchRequestGallery().then((function(e){return console.log(e),R.currentPage=e.page,R.totalPages=e.total_pages,R.totalResults=e.total_results,e})).then((function(e){var n=e.results;0===n.length?M(o.galleryRef):P(k(n,j))})).catch((function(e){return console.log(e)}))}),1e3)),o.prevBtnRef.addEventListener("click",(function(){if(1===l.page||R.error)return;if(y.value)return b.innerHTML="",l.page-=1,void q();b.innerHTML="",l.page-=1,console.log(l.page),L()})),o.nextBtnRef.addEventListener("click",(function(){if(console.log(R.totalPages),l.page===R.totalPages||R.error)return;if(y.value)return b.innerHTML="",l.page+=1,void q();b.innerHTML="",l.page+=1,console.log(l.page),L()})),b.addEventListener("click",(function(e){if("IMG"!==e.target.nodeName)return;var n=e.target.dataset.compare;_.forEach((function(e){e.poster_path===n&&(S=Object.assign({},e))})),t=function(e,n){var t=[];return e.genre_ids.forEach((function(e){for(var r,a=h(n);!(r=a()).done;){var o=r.value;o.id===e&&t.push(o.name)}})),e.genre_ids=t,console.log(e),e}(S,j),r=u()(t),o.modalBoxRef.insertAdjacentHTML("afterbegin",r),w.classList.remove("is-hidden");var t,r}))},RsKt:function(e,n,t){var r=t("mp5j");e.exports=(r.default||r).template({1:function(e,n,t,r,a){var o,l,i=null!=n?n:e.nullContext||{},s=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<li class="poster">\r\n  <div class="poster__img-wrap">\r\n    <img src="'+c("function"==typeof(l=null!=(l=u(t,"poster_path")||(null!=n?u(n,"poster_path"):n))?l:s)?l.call(i,{name:"poster_path",hash:{},data:a,loc:{start:{line:4,column:14},end:{line:4,column:29}}}):l)+'" data-compare="'+c("function"==typeof(l=null!=(l=u(t,"poster_path")||(null!=n?u(n,"poster_path"):n))?l:s)?l.call(i,{name:"poster_path",hash:{},data:a,loc:{start:{line:4,column:45},end:{line:4,column:60}}}):l)+'" alt="movie-poster" class="poster__img">\r\n  </div>\r\n  <div class="poster__content-wrap">\r\n    <h3 class="poster__movie-name">'+c("function"==typeof(l=null!=(l=u(t,"original_title")||(null!=n?u(n,"original_title"):n))?l:s)?l.call(i,{name:"original_title",hash:{},data:a,loc:{start:{line:7,column:35},end:{line:7,column:53}}}):l)+'</h3>\r\n    <div class="poster__movie-info-wrap">\r\n      <ul class="poster__genre-list list">\r\n'+(null!=(o=u(t,"each").call(i,null!=n?u(n,"genre_ids"):n,{name:"each",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a,loc:{start:{line:10,column:8},end:{line:13,column:17}}}))?o:"")+'        <p class="poster__genre-item">&nbsp| '+c("function"==typeof(l=null!=(l=u(t,"release_date")||(null!=n?u(n,"release_date"):n))?l:s)?l.call(i,{name:"release_date",hash:{},data:a,loc:{start:{line:14,column:45},end:{line:14,column:61}}}):l)+"</p>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</li>\r\n"},2:function(e,n,t,r,a){return'        <li class="poster__genre-item">\r\n          '+e.escapeExpression(e.lambda(n,n))+"<span>,&nbsp;</span></li>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,n,t,r,a){var o;return null!=(o=(e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]})(t,"each").call(null!=n?n:e.nullContext||{},n,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:0},end:{line:19,column:9}}}))?o:""},useData:!0})},s9S4:function(e,n,t){var r=t("mp5j");e.exports=(r.default||r).template({1:function(e,n,t,r,a){return'            <li class="card__info-content__genre-item">'+e.escapeExpression(e.lambda(n,n))+"<span>,&nbsp;</span></li>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,n,t,r,a){var o,l,i=null!=n?n:e.nullContext||{},s=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'\r\n\r\n\r\n\r\n<div class="card__img-wrap">\r\n  <img src="'+u(typeof(l=null!=(l=d(t,"poster_path")||(null!=n?d(n,"poster_path"):n))?l:s)===c?l.call(i,{name:"poster_path",hash:{},data:a,loc:{start:{line:45,column:12},end:{line:45,column:27}}}):l)+'" alt="modal__img" class="card__img">\r\n</div>\r\n<div class="card__content-wrap">\r\n  <h3 class="card__title">'+u(typeof(l=null!=(l=d(t,"original_title")||(null!=n?d(n,"original_title"):n))?l:s)===c?l.call(i,{name:"original_title",hash:{},data:a,loc:{start:{line:48,column:26},end:{line:48,column:44}}}):l)+'</h3>\r\n  <div class="card__info-wrap">\r\n    <div class="card__info-title">\r\n      <ul class="card__info-title__list list">\r\n        <li class="card__info-title__item">Vote / Votes</li>\r\n        <li class="card__info-title__item">Popularity</li>\r\n        <li class="card__info-title__item">Original Title</li>\r\n        <li class="card__info-title__item">Genre</li>\r\n      </ul>\r\n    </div>\r\n    <div class="card__info-content">\r\n      <ul class="card__info-content__list list">\r\n        <li class="card__info-content__item"><span>'+u(typeof(l=null!=(l=d(t,"vote_average")||(null!=n?d(n,"vote_average"):n))?l:s)===c?l.call(i,{name:"vote_average",hash:{},data:a,loc:{start:{line:60,column:51},end:{line:60,column:67}}}):l)+"</span>&nbsp;/&nbsp;<span>"+u(typeof(l=null!=(l=d(t,"vote_count")||(null!=n?d(n,"vote_count"):n))?l:s)===c?l.call(i,{name:"vote_count",hash:{},data:a,loc:{start:{line:60,column:93},end:{line:60,column:107}}}):l)+'</span></li>\r\n        <li class="card__info-content__item">'+u(typeof(l=null!=(l=d(t,"popularity")||(null!=n?d(n,"popularity"):n))?l:s)===c?l.call(i,{name:"popularity",hash:{},data:a,loc:{start:{line:61,column:45},end:{line:61,column:59}}}):l)+'</li>\r\n        <li class="card__info-content__item">'+u(typeof(l=null!=(l=d(t,"original_title")||(null!=n?d(n,"original_title"):n))?l:s)===c?l.call(i,{name:"original_title",hash:{},data:a,loc:{start:{line:62,column:45},end:{line:62,column:63}}}):l)+'</li>\r\n        <li class="card__info-content__item">\r\n          <ul class="card__info-content__genre-list list">\r\n'+(null!=(o=d(t,"each").call(i,null!=n?d(n,"genre_ids"):n,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:65,column:12},end:{line:67,column:21}}}))?o:"")+'          </ul>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n  <p class="card__description-title">About</p>\r\n  <p class="card__description">'+u(typeof(l=null!=(l=d(t,"overview")||(null!=n?d(n,"overview"):n))?l:s)===c?l.call(i,{name:"overview",hash:{},data:a,loc:{start:{line:74,column:31},end:{line:74,column:43}}}):l)+'</p>\r\n  <div class="card__btn-box">\r\n    <button type="button" class="button card__btn js-btn-watched">add to Watched</button>\r\n    <button type="button" class="button card__btn js-btn-queue">add to queue</button>\r\n  </div>\r\n</div>'},useData:!0})},yjly:function(e,n,t){}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.ebc8238395f769f72f1e.js.map